(this.webpackJsonpadmin_ui=this.webpackJsonpadmin_ui||[]).push([[0],{51:function(e,t,n){e.exports=n.p+"static/media/logo-root.20b808e8.svg"},59:function(e,t,n){e.exports=n(71)},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(20),c=n.n(o),i=n(34),l=n(25),s=n(27),u="",p="FETCH_CHECK_TOKEN_PENDING",f="FETCH_CHECK_TOKEN_SUCCESS",m="FETCH_CHECK_TOKEN_ERROR";function d(e){return function(t){t({type:p}),fetch("".concat(u,"/admin/check-token"),{method:"GET",headers:{"x-access-token":e}}).then((function(e){if(200!==e.status)throw new Error(e.error);var n;t({type:f,payload:n})})).catch((function(e){t(function(e){return{type:m,error:e}}(e))}))}}var g="FETCH_PROFILE_PENDING",h="FETCH_PROFILE_SUCCESS",E="FETCH_PROFILE_ERROR";function b(){return function(e){return e({type:g}),fetch("".concat(u,"/api/profiles"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e({type:h,payload:t})})).catch((function(t){e(function(e){return{type:E,error:e}}(t))}))}}var O="FETCH_SCALES_PENDING",y="FETCH_SCALES_SUCCESS",v="FETCH_SCALES_ERROR";function w(){return function(e){return e({type:O}),fetch("".concat(u,"/api/scales"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e({type:y,payload:t})})).catch((function(t){e(function(e){return{type:v,error:e}}(t))}))}}var j=n(103),S=n(95),P=n(93),x=n(73),_=n(96),C=n(97),N=n(98),k=n(99),T=n(100),A=n(41),D=n.n(A),F=n(47),L=n(31),H=n(109),R=n(72),I=Object(P.a)({root:{width:"100%",overflowX:"auto",marginTop:"20px",padding:"10px 20px",boxSizing:"border-box"},box:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},title:{color:"#000"},subtitle:{fontSize:"12px",lineHeight:"1.5",textAlign:"center",marginTop:"5px"}});function G(e){var t=I();return a.a.createElement(H.a,{className:t.box},a.a.createElement(R.a,{variant:"h4",className:t.title},e.number),a.a.createElement(R.a,{variant:"subtitle1",className:t.subtitle},e.desc))}var W=function(e){var t=I(),n=Object(r.useState)({scales:[],completedProfiles:0}),o=Object(L.a)(n,2),c=o[0],i=o[1];return Object(r.useEffect)((function(){function e(){return(e=Object(F.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.prev=3,e.next=6,n.json();case 6:r=e.sent,i(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("Statisticts component: problem with fetch /admin/statistics: ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}("".concat(u,"/admin/statistics"))}),[]),a.a.createElement(a.a.Fragment,null,c.completedProfiles>0&&a.a.createElement(x.a,{className:t.root},a.a.createElement(S.a,{container:!0,direction:"row",spacing:2},a.a.createElement(S.a,{item:!0,xs:12},a.a.createElement(G,{number:c.completedProfiles,desc:"\u0420\u0430\u0437 \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043e \u043a\u0432\u0456\u0437"})),c.scales.map((function(e){return a.a.createElement(S.a,{item:!0,xs:12,md:2,key:e.title},a.a.createElement(G,{number:e.value,desc:"\u0421\u0435\u0440\u0435\u0434\u043d\u0454 \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457: ".concat(e.title)}))})))))},K=Object(P.a)({root:{width:"100%",overflowX:"auto",marginTop:"20px"},table:{minWidth:650}});function J(e){var t=K(),n=e.profiles,o=e.scales;return a.a.createElement(r.Fragment,null,a.a.createElement(W,null),a.a.createElement(x.a,{className:t.root},a.a.createElement(_.a,{className:t.table,"aria-label":"simple table"},a.a.createElement(C.a,null,a.a.createElement(N.a,null,a.a.createElement(k.a,null,"Profile id"),o.map((function(e){return a.a.createElement(k.a,{key:e._id,align:"right"},e.title)})))),a.a.createElement(T.a,null,n.map((function(e){return a.a.createElement(N.a,{key:e._id},a.a.createElement(k.a,{component:"th",scope:"row"},e._id),e.scales.map((function(e){return a.a.createElement(k.a,{key:e._id,align:"right"},e.value)})))}))))))}var U=n(101),z=n(102),X=n(51),q=n.n(X),B=Object(P.a)((function(){return{toolbar:{minHeight:"45px",boxShadow:"0 0 3px 0 rgba(0,0,0, .1)",background:"#000"},image:{width:"100%",maxWidth:"120px"}}}));var M=function(){var e=B();return a.a.createElement(U.a,{position:"static"},a.a.createElement(z.a,{className:e.toolbar},a.a.createElement("img",{src:q.a,className:e.image,alt:"Softserve Logo"})))};var V,$=Object(s.b)((function(e){return{shouldAllowAuth:e.login.shouldAllowAuth,shouldLogAgain:e.login.shouldLogAgain,token:e.login.token,profiles:e.profiles.profiles,isProfileLoaded:!e.profiles.pending,scales:e.scales.scales,isScaleLodaded:!e.scales.pending}}),(function(e){return{checkToken:function(t){return e(d(t))},fetchProfiles:function(){return e(b())},fetchScales:function(){return e(w())}}}))((V=function(e){var t=e.fetchProfiles,n=e.fetchScales,o=e.profiles,c=e.scales,i=e.isProfileLoaded;return Object(r.useEffect)((function(){t(),n()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(M,null),a.a.createElement(j.a,{fixed:!0,maxWidth:"lg",spacing:1},a.a.createElement(S.a,{container:!0,direction:"row"},a.a.createElement(S.a,{item:!0,xs:12},i?a.a.createElement(J,{profiles:o,scales:c}):a.a.createElement("h1",null,"No data loaded")))))},function(e){var t=e.checkToken,n=e.token,o=e.shouldAllowAuth,c=e.shouldLogAgain;return Object(r.useEffect)((function(){t(n||JSON.parse(localStorage.getItem("token")))}),[t,n]),c?a.a.createElement(l.a,{to:{pathname:"/login"}}):o?a.a.createElement(a.a.Fragment,null,a.a.createElement(V,e)):null})),Q="FETCH_LOGIN_PENDING",Y="FETCH_LOGIN_SUCCESS",Z="FETCH_LOGIN_ERROR";function ee(e){return function(t){t({type:Q}),fetch("".concat(u,"/admin/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(200!==e.status)throw new Error(e.error);e.text().then((function(e){t({type:Y,payload:e}),localStorage.setItem("token",JSON.stringify(e))}))})).catch((function(e){t(function(e){return{type:Z,error:e}}(e)),alert("Error logging in please try again")}))}}var te=n(17),ne=n(3),re=n(106),ae=n(107),oe=n(112),ce=n(111),ie=n(110),le=n(104),se=n(105),ue=n(108);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e){var t=e.fetchLogin,n=e.loginSuccess,o=Object(P.a)((function(e){return{form:{display:"flex",flexDirection:"column",maxWidth:"400px",margin:"0 auto"},input:{width:"100%!important",margin:"0 0 10px 0"},submit:{width:"100%!important",height:"56px",background:"#000",color:"#fff","&:hover":{color:"#000"}},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:200},title:{textAlign:"center",fontSize:"1.5em"}}}))(),c=Object(l.g)(),i=Object(r.useState)({login:"",password:""}),s=Object(L.a)(i,2),u=s[0],p=s[1],f=Object(r.useState)(!1),m=Object(L.a)(f,2),d=m[0],g=m[1],h=function(e){var t=e.target,n=t.value,r=t.name;p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(te.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,Object(te.a)({},r,n)))};return n&&c.push("/profiles"),a.a.createElement(a.a.Fragment,null,a.a.createElement(M,null),a.a.createElement(j.a,{fixed:!0,maxWidth:"lg",spacing:1},a.a.createElement("form",{className:Object(ne.a)(o.form),onSubmit:function(e){e.preventDefault(),t(u)}},a.a.createElement("h1",{className:o.title},"Please login"),a.a.createElement(oe.a,{className:Object(ne.a)(o.textField,o.input),variant:"outlined"},a.a.createElement(ce.a,{htmlFor:"outlined-adornment-login"},"Login"),a.a.createElement(ie.a,{id:"outlined-adornment-login",name:"login",value:u.login,onChange:h,placeholder:"Enter login",labelWidth:50,required:!0})),a.a.createElement(oe.a,{className:Object(ne.a)(o.textField,o.input),variant:"outlined"},a.a.createElement(ce.a,{htmlFor:"outlined-adornment-password"},"Password"),a.a.createElement(ie.a,{id:"outlined-adornment-password",name:"password",type:d?"text":"password",value:u.password,onChange:h,placeholder:"Enter password",required:!0,endAdornment:a.a.createElement(le.a,{position:"end"},a.a.createElement(se.a,{"aria-label":"toggle password visibility",onClick:function(){g(!d)},onMouseDown:function(e){e.preventDefault()}},d?a.a.createElement(re.a,null):a.a.createElement(ae.a,null))),labelWidth:70})),a.a.createElement(ue.a,{variant:"contained",type:"submit",size:"large",className:Object(ne.a)(o.submit)},"Submit"))))},me=Object(s.b)((function(e){return{pending:e.login.pending,loginSuccess:e.login.loginSuccess}}),(function(e){return{fetchLogin:function(t){return e(ee(t))}}}))(fe),de=function(){return a.a.createElement(i.a,null,a.a.createElement(l.d,null,a.a.createElement(l.b,{exact:!0,path:"/profiles",component:$}),a.a.createElement(l.b,{path:"/",component:me}),a.a.createElement(l.a,{from:"*",to:"/profiles"})))};var ge=function(){return a.a.createElement(r.Fragment,null,a.a.createElement(de,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=n(24),Ee=n(53);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(n,!0).forEach((function(t){Object(te.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={pending:!1,loginSuccess:!1,token:"",shouldAllowAuth:!1,error:{},shouldLogAgain:!1},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Oe({},e,{shouldAllowAuth:!1,pending:!0});case Y:return Oe({},e,{loginSuccess:!0,shouldAllowAuth:!0,token:t.payload,pending:!1});case Z:return Oe({},e,{pending:!1,error:t.error});case p:return Oe({},e,{shouldLogAgain:!1,pending:!0});case f:return Oe({},e,{pending:!1,shouldLogAgain:!1,shouldAllowAuth:!0});case m:return Oe({},e,{pending:!1,shouldLogAgain:!0,error:t.error});default:return e}};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach((function(t){Object(te.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se={pending:!1,profiles:[]},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return je({},e,{pending:!0});case h:return je({},e,{profiles:t.payload,pending:!1});case E:return je({},e,{pending:!1,error:t.error});default:return e}};function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(n,!0).forEach((function(t){Object(te.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={pending:!1,scales:[]},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return _e({},e,{pending:!0});case y:return _e({},e,{scales:t.payload,pending:!1});case v:return _e({},e,{pending:!1,error:t.error});default:return e}},ke=Object(he.c)({login:ve,profiles:Pe,scales:Ne});n(70);var Te=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d;return Object(he.e)(ke,e,t(Object(he.a)(Ee.a)))}();c.a.render(a.a.createElement(s.a,{store:Te},a.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.412574a4.chunk.js.map